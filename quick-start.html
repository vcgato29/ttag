
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Quick Start Â· ttag javascript es6 localization tool</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-atoc/atoc.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="localization-with-webpack.html" />
    
    
    <link rel="prev" href="ignore-code-blocks.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"ttag","repo":"ttag","type":"star","size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">General</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="configuration.html">
            
                <a href="configuration.html">
            
                    
                    Configuration(babel plugin)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="configuration-lib.html">
            
                <a href="configuration-lib.html">
            
                    
                    Configuration(ttag lib API)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="translator-comments.html">
            
                <a href="translator-comments.html">
            
                    
                    Leaving comments for translators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="validation.html">
            
                <a href="validation.html">
            
                    
                    Validation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="multiline-strings.html">
            
                <a href="multiline-strings.html">
            
                    
                    Multiline strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="aliasing.html">
            
                <a href="aliasing.html">
            
                    
                    Aliasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="ignore-code-blocks.html">
            
                <a href="ignore-code-blocks.html">
            
                    
                    Ignoring code blocks
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tutorials</li>
        
        
    
        <li class="chapter active" data-level="2.1" data-path="quick-start.html">
            
                <a href="quick-start.html">
            
                    
                    Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="localization-with-webpack.html">
            
                <a href="localization-with-webpack.html">
            
                    
                    Localization with webpack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="translations-without-transpile.html">
            
                <a href="translations-without-transpile.html">
            
                    
                    Translate without transpilation
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">functions</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="reference-t-tag.html">
            
                <a href="reference-t-tag.html">
            
                    
                    t (template literals)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="reference-ngettext.html">
            
                <a href="reference-ngettext.html">
            
                    
                    ngettext (pluralization)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="reference-jt-tag.html">
            
                <a href="reference-jt-tag.html">
            
                    
                    jt (jsx support)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="reference-gettext.html">
            
                <a href="reference-gettext.html">
            
                    
                    gettext (simple strings)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="reference-contexts.html">
            
                <a href="reference-contexts.html">
            
                    
                    c (contexts)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">FAQ</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="why-use-msgid-for-ngettext.html">
            
                <a href="why-use-msgid-for-ngettext.html">
            
                    
                    Why use msgid tag for ngettext?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="why-po-is-not-updated.html">
            
                <a href="why-po-is-not-updated.html">
            
                    
                    Why .pot/.po files are not generated or updated?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="MIGRATION.html">
            
                <a href="MIGRATION.html">
            
                    
                    Migration Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="CHANGELOG.html">
            
                <a href="CHANGELOG.html">
            
                    
                    CHANGELOG
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Quick Start</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="quick-start">Quick Start</h1>
<p>In a few steps you will be able to setup the full translation cycle with gettext and ttag.
This example uses ES6 features, so you need to install Babel to transpile all its source code:</p>
<pre><code class="lang-bash">npm install --save-dev babel-cli babel-preset-env babel-core
</code></pre>
<blockquote>
<p>All sources for this tutorial can be found under the <a href="https://github.com/ttag/ttag/tree/master/examples/quickstart" target="_blank"><code>examples</code></a>
directory.</p>
</blockquote>
<!-- toc -->
<ul>
<li><a href="#1-simple-counter-program">1. Simple counter program</a></li>
<li><a href="#2-wrap-strings-with-ttag-tags-and-functions">2. Wrap strings with ttag tags and functions</a></li>
<li><a href="#3-setup-localization">3. Setup localization</a><ul>
<li><a href="#create-a-po-file">Create a <code>.po</code> file</a></li>
<li><a href="#update-the-po-file">Update the <code>.po</code> file</a></li>
</ul>
</li>
<li><a href="#4-load-translations">4. Load translations</a></li>
</ul>
<!-- tocstop -->
<h3 id="1-simple-counter-program">1. Simple counter program</h3>
<p>Let&apos;s setup some simple JavaScript file <code>counter.js</code> that we will localize later.</p>
<pre><code class="lang-js"><span class="hljs-comment">// counter.js</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startCount</span>(<span class="hljs-params">n</span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`starting count up to <span class="hljs-subst">${n}</span>`</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${i}</span> ticks passed`</span>);
    }
}

startCount(<span class="hljs-number">3</span>);
</code></pre>
<p>Let&apos;s execute <code>counter.js</code> file:</p>
<pre><code>node index.js

starting count up to 3
0 ticks passed
1 ticks passed
2 ticks passed
3 ticks passed
</code></pre><p>The program works but it uses the wrong plural form for the first iteration: <code>1 ticks passed</code>. It should be <code>1 tick passed</code>.</p>
<p>Let&apos;s fix it.</p>
<h3 id="2-wrap-strings-with-ttag-tags-and-functions">2. Wrap strings with ttag tags and functions</h3>
<p>Install the ttag library:</p>
<pre><code class="lang-bash">npm install --save ttag
</code></pre>
<p>Now we can wrap strings with ttag functions and tags to make them translatable:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { t, ngettext, msgid } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;ttag&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startCount</span>(<span class="hljs-params">n</span>)</span>{
    <span class="hljs-built_in">console</span>.log(t<span class="hljs-string">`starting count up to <span class="hljs-subst">${n}</span>`</span>); <span class="hljs-comment">// using &apos;t&apos; tag for 1 to 1 translations</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) {
       <span class="hljs-comment">// use ngettext function for handling plural forms</span>
       <span class="hljs-built_in">console</span>.log(ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${i}</span> tick passed`</span>, <span class="hljs-string">`<span class="hljs-subst">${i}</span> ticks passed`</span>, i));
    }
}
</code></pre>
<p>For more information, please check:</p>
<ul>
<li><code>t</code> tag <a href="reference-t-tag.html">reference documentation</a></li>
<li><code>ngettext</code> function <a href="reference-ngettext.html">reference documentation</a></li>
</ul>
<p>Adding <code>counter</code> script to the package.json:</p>
<pre><code class="lang-json">{
<span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;counter&quot;</span>: <span class="hljs-string">&quot;babel-node --presets env counter.js&quot;</span>
  }
}
</code></pre>
<p>Run the program again, this time using Babel:</p>
<pre><code class="lang-bash">npm run counter
</code></pre>
<p>Output:</p>
<pre><code>starting count up to 3
0 ticks passed
1 tick passed
2 ticks passed
3 ticks passed
</code></pre><p>As we see, plural forms are working out of the box without no extra configuration for the English locale.</p>
<h3 id="3-setup-localization">3. Setup localization</h3>
<p>Gettext standard is based on manipulation with <code>.po</code> files. In general, a <code>.po</code> file is a special file format
for adding, updating, and editing translations.</p>
<p>Let&apos;s install <a href="https://github.com/ttag/ttag-cli" target="_blank"><code>ttag-cli</code></a> for <code>.po</code> file manipulation:</p>
<pre><code class="lang-bash">npm install -g ttag-cli
</code></pre>
<blockquote>
<p>After installtion, the <code>ttag</code> command should be available globally</p>
</blockquote>
<h4 id="create-a-po-file">Create a <code>.po</code> file</h4>
<p>Let&apos;s assume that we want to translate our program to Ukrainian language.</p>
<pre><code class="lang-bash">ttag init uk uk.po
</code></pre>
<p>This will create a new .po file with all settings for the Ukrainian language</p>
<blockquote>
<p>See all available languages at the <a href="https://www.gnu.org/software/gettext/manual/html_node/Usual-Language-Codes.html" target="_blank">GNU gettext manual</a></p>
</blockquote>
<h4 id="update-the-po-file">Update the <code>.po</code> file</h4>
<p>To sync all strings in your sources with the <code>.po</code> file, you can use <code>ttag update</code> command.</p>
<pre><code class="lang-bash">ttag update uk.po counter.js
</code></pre>
<p>Now, you can open <code>uk.po</code> file and add translations to extracted strings.</p>
<h3 id="4-load-translations">4. Load translations</h3>
<p>To be able to apply translations you should parse the <code>.po</code> file. We recommend to use the 
<a href="https://www.npmjs.com/package/gettext-parser" target="_blank"><code>gettext-parser</code> package</a> for that purpose:</p>
<pre><code class="lang-bash">npm install --save-dev gettext-parser
</code></pre>
<p>Let&apos;s modify our program to load the locale from the <code>.po</code> file if the <code>LOCALE</code> environment variable
is present:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { ngettext, msgid, t,  addLocale, useLocale } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;ttag&apos;</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;fs&apos;</span>;
<span class="hljs-keyword">import</span> gt <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;gettext-parser&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadFile</span>(<span class="hljs-params">filePath</span>) </span>{
    gt.po.parse(fs.readFileSync(filePath));
}

<span class="hljs-keyword">const</span> locale = process.env.LOCALE;

<span class="hljs-keyword">if</span> (locale) {
    <span class="hljs-keyword">const</span> translationObj = loadFile(<span class="hljs-string">`<span class="hljs-subst">${locale}</span>.po`</span>);
    addLocale(locale, translationObj);
    useLocale(locale);
}

<span class="hljs-comment">//....</span>
</code></pre>
<p>Change the <code>counter</code> entry of the <code>scripts</code> section to include the locale set as an environment variable:</p>
<pre><code class="lang-js"><span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;counter&quot;</span>: <span class="hljs-string">&quot;LOCALE=uk babel-node --presets env counter.js&quot;</span>
}
</code></pre>
<p>Let&apos;s run it with <code>npm run counter</code></p>
<pre><code class="lang-bash">&#x43F;&#x43E;&#x447;&#x438;&#x43D;&#x430;&#x454;&#x43C;&#x43E; &#x440;&#x430;&#x445;&#x443;&#x43D;&#x43E;&#x43A; &#x434;&#x43E; 3
&#x43C;&#x438;&#x43D;&#x443;&#x43B;&#x43E; 0 &#x442;&#x456;&#x43A;&#x456;&#x432;
&#x43C;&#x438;&#x43D;&#x443;&#x432; 1 &#x442;&#x456;&#x43A;
&#x43C;&#x438;&#x43D;&#x443;&#x43B;&#x43E; 2 &#x442;&#x456;&#x43A;&#x430;
&#x43C;&#x438;&#x43D;&#x443;&#x43B;&#x43E; 3 &#x442;&#x456;&#x43A;&#x430;
</code></pre>
<blockquote>
<p>Note: <code>ttag-cli</code> is a wrapper around <a href="https://github.com/ttag/babel-plugin-ttag" target="_blank">babel-plugin-ttag</a></p>
</blockquote>
<p><strong>Where to go now?</strong>  </p>
<p>If you use webpack on your build process, check <a href="localization-with-webpack.html">Localization with webpack</a> section of the documentation.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ignore-code-blocks.html" class="navigation navigation-prev " aria-label="Previous page: Ignoring code blocks">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="localization-with-webpack.html" class="navigation navigation-next " aria-label="Next page: Localization with webpack">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Quick Start","level":"2.1","depth":1,"next":{"title":"Localization with webpack","level":"2.2","depth":1,"path":"localization-with-webpack.md","ref":"localization-with-webpack.md","articles":[]},"previous":{"title":"Ignoring code blocks","level":"1.9","depth":1,"path":"ignore-code-blocks.md","ref":"ignore-code-blocks.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchorjs","github-buttons","ga","atoc"],"root":"./gitbook","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"atoc":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"github-edit":{"repo":"ttag/ttag","branch":"master"},"github-buttons":{"buttons":[{"user":"ttag","repo":"ttag","type":"star","size":"small"}]},"ga":{"configuration":"auto","token":"UA-90721450-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"base":"https://github.com/ttag/ttag/edit/master/gitbook","label":"Edit This Page"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"ttag javascript es6 localization tool","gitbook":"*"},"file":{"path":"quick-start.md","mtime":"2018-05-05T15:23:37.177Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-05-05T15:50:27.733Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-atoc/atoc.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

