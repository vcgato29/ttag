
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>ngettext (pluralization) Â· ttag javascript es6 localization tool</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-atoc/atoc.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="reference-jt-tag.html" />
    
    
    <link rel="prev" href="reference-t-tag.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"ttag","repo":"ttag","type":"star","size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">General</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="configuration.html">
            
                <a href="configuration.html">
            
                    
                    Configuration(babel plugin)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="configuration-lib.html">
            
                <a href="configuration-lib.html">
            
                    
                    Configuration(ttag lib API)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="translator-comments.html">
            
                <a href="translator-comments.html">
            
                    
                    Leaving comments for translators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="validation.html">
            
                <a href="validation.html">
            
                    
                    Validation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="multiline-strings.html">
            
                <a href="multiline-strings.html">
            
                    
                    Multiline strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="aliasing.html">
            
                <a href="aliasing.html">
            
                    
                    Aliasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="ignore-code-blocks.html">
            
                <a href="ignore-code-blocks.html">
            
                    
                    Ignoring code blocks
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tutorials</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="quick-start.html">
            
                <a href="quick-start.html">
            
                    
                    Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="localization-with-webpack.html">
            
                <a href="localization-with-webpack.html">
            
                    
                    Localization with webpack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="translations-without-transpile.html">
            
                <a href="translations-without-transpile.html">
            
                    
                    Translate without transpilation
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">functions</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="reference-t-tag.html">
            
                <a href="reference-t-tag.html">
            
                    
                    t (template literals)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.2" data-path="reference-ngettext.html">
            
                <a href="reference-ngettext.html">
            
                    
                    ngettext (pluralization)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="reference-jt-tag.html">
            
                <a href="reference-jt-tag.html">
            
                    
                    jt (jsx support)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="reference-gettext.html">
            
                <a href="reference-gettext.html">
            
                    
                    gettext (simple strings)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="reference-contexts.html">
            
                <a href="reference-contexts.html">
            
                    
                    c (contexts)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">FAQ</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="why-use-msgid-for-ngettext.html">
            
                <a href="why-use-msgid-for-ngettext.html">
            
                    
                    Why use msgid tag for ngettext?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="why-po-is-not-updated.html">
            
                <a href="why-po-is-not-updated.html">
            
                    
                    Why .pot/.po files are not generated or updated?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="MIGRATION.html">
            
                <a href="MIGRATION.html">
            
                    
                    Migration Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="CHANGELOG.html">
            
                <a href="CHANGELOG.html">
            
                    
                    CHANGELOG
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >ngettext (pluralization)</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ngettext">ngettext</h1>
<p>This is an implementation of <code>ngettext</code> function from standard GNU gettext. But also its standard behavior can be 
extended by some extra configuration for handling different number of plural forms than 2. By default it works as 
expected with 2 plural forms. So you can use it even when you don&apos;t have actual translations, just for having support 
for plural forms in your code.</p>
<h2 id="live-demo">Live demo</h2>
<blockquote>
<p>this demo works without the transpilation step, consider using <code>babel-plugin-ttag</code> for production usage</p>
</blockquote>
<p><a href="https://jsfiddle.net/AlexMost/mc2pd1on/2/" target="_blank">https://jsfiddle.net/AlexMost/mc2pd1on/2/</a></p>
<h3 id="usage">Usage:</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { ngettext, msgid } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;ttag&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">return</span> ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>, n)
}
</code></pre>
<blockquote>
<p>This example works out of the box without no extra configuration for <strong>ttag</strong> plugin.</p>
</blockquote>
<p>You may noticed that the first argument for <code>ngettext</code> is tagged with <code>msgid</code> tag. 
This may seem a little bit weird, but this is the only way to find translations by <strong>msgid</strong> without code 
transpilation with babel plugin. User friendly checks on extract and resolve steps will not let you forgive about that.
More details about why we are using <code>msgid</code> tag are <a href="why-use-msgid-for-ngettext.html">here</a>.</p>
<h3 id="ngettext-format">ngettext format</h3>
<p><strong>Valid:</strong></p>
<pre><code class="lang-js">ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>, n)
ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${1}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${1}</span> times clicked`</span>, <span class="hljs-number">1</span>)
ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${this.count}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${this.count}</span> times clicked`</span>, <span class="hljs-keyword">this</span>.count)
</code></pre>
<p><strong>Invalid:</strong></p>
<pre><code class="lang-js">ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>) <span class="hljs-comment">// plural number argument is missing</span>
ngettext(<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>, n) <span class="hljs-comment">// msgid tag for the first argument is missing</span>
<span class="hljs-comment">// only identifiers and member expressions are allowed inside translated templates.</span>
ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${fn()}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${fn()}</span> times clicked`</span>, fn())
</code></pre>
<h3 id="po-extraction"><code>.po</code> extraction</h3>
<p>We will extract this from the example above:</p>
<pre><code>#: src/ngettextDemo.js:19
msgid &quot;${ n } time clicked&quot;
msgid_plural &quot;${ n } times clicked&quot;
msgstr[0] &quot;&quot;
msgstr[1] &quot;&quot;
</code></pre><h3 id="resolve-translations">Resolve translations</h3>
<p>Assume that translator added translations to our previous extracted entry:</p>
<pre><code>#: src/ngettextDemo.js:19
msgid &quot;${ n } time clicked&quot;
msgid_plural &quot;${ n } times clicked&quot;
msgstr[0] &quot;${ n } time clicked [translated]&quot;
msgstr[1] &quot;${ n } times clicked [translated]&quot;
</code></pre><p>The resulting code (after transpilation will look like):</p>
<pre><code class="lang-js"><span class="hljs-meta">&quot;use strict&quot;</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_tag_ngettext</span>(<span class="hljs-params">n, args</span>) </span>{ 
    <span class="hljs-keyword">return</span> args[+(n != <span class="hljs-number">1</span>)];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _tag_ngettext(n, [ n + <span class="hljs-string">&quot; time clicked [translated]&quot;</span>, n + <span class="hljs-string">&quot; times clicked [translated]&quot;</span> ]));
}
</code></pre>
<p>There is a new extra function in our file - <code>_tag_ngettext</code>, but you don&apos;t need to worry much about it, because this 
function is autogenerated by ttag and may change in future without requiring any changes to your code.</p>
<h3 id="plural-forms-that-are-different-from-default-english">Plural forms that are different from default (English)</h3>
<p>It is possible that your are using different language than English in strings in the sources. And here is the point 
when usage of <code>ngettext</code> becomes not so clear. For instance, you decided to write strings in Ukrainian, 
because at the time of the first release it was a single language for your project. 
At some point, you decided to localize your strings and want to use <code>ngettext</code> for plurals. 
Ukrainian language has 3 plural forms, but standard ngettext has only 2 arguments for them, 
so which one of those 3 plural forms must be passed to <code>ngettext</code> function? 
ttag suggests a quite a nice solution for this problem.</p>
<p>By default ttag uses &apos;en&apos; language (English), but if you want to use <code>ngettext</code> with Ukrainian locale, you should call <a href="configuration-lib.html#setdefaultlangstring-lang">setDefaultLang</a> for the library and <a href="configuration.html#configdefaultlang-string">defaultLang</a> for the plugin accordingly.</p>
<pre><code class="lang-js">setDefaultLang(<span class="hljs-string">&apos;uk&apos;</span>);

<span class="hljs-comment">// 3 forms will be extracted</span>
ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${ n }</span>form1`</span>, <span class="hljs-string">`<span class="hljs-subst">${ n }</span> form2`</span>, <span class="hljs-string">`<span class="hljs-subst">${ n }</span> form3`</span>, n);
</code></pre>
<blockquote>
<p>Tip: you can check the official <a href="https://www.gnu.org/software/gettext/manual/html_node/Usual-Language-Codes.html" target="_blank">GNU gettext manual</a>
for language ISO codes.</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="reference-t-tag.html" class="navigation navigation-prev " aria-label="Previous page: t (template literals)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="reference-jt-tag.html" class="navigation navigation-next " aria-label="Next page: jt (jsx support)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"ngettext (pluralization)","level":"3.2","depth":1,"next":{"title":"jt (jsx support)","level":"3.3","depth":1,"path":"reference-jt-tag.md","ref":"reference-jt-tag.md","articles":[]},"previous":{"title":"t (template literals)","level":"3.1","depth":1,"path":"reference-t-tag.md","ref":"reference-t-tag.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchorjs","github-buttons","ga","atoc"],"root":"./gitbook","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"atoc":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"github-edit":{"repo":"ttag/ttag","branch":"master"},"github-buttons":{"buttons":[{"user":"ttag","repo":"ttag","type":"star","size":"small"}]},"ga":{"configuration":"auto","token":"UA-90721450-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"base":"https://github.com/ttag/ttag/edit/master/gitbook","label":"Edit This Page"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"ttag javascript es6 localization tool","gitbook":"*"},"file":{"path":"reference-ngettext.md","mtime":"2018-05-05T15:23:37.177Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-05-05T15:50:27.733Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-atoc/atoc.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

